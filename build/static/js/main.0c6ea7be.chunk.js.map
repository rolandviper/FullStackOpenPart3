{"version":3,"sources":["components/Filter.js","components/PersonForm.js","services/dataService.js","components/Person.js","components/Notification.js","App.js","index.js"],"names":["Filter","value","handler","onChange","PersonForm","addDetails","newName","newNumber","handleAddName","handleAddNumber","onSubmit","type","url","dataService","getAll","axios","get","then","res","data","createData","newData","post","deleteData","id","delete","updateData","put","Person","persons","setPersons","setMessage","map","person","i","name","number","onClick","window","confirm","filter","text","setTimeout","catch","err","console","log","deleteHandler","Notification","message","className","App","useState","setNewName","setNumber","setFilter","filterPersons","setFilterPersons","useEffect","e","preventDefault","target","p","toLowerCase","indexOf","perArray","nameObj","includes","returnData","concat","response","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0c6ea7be.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst Filter = ({ value, handler }) => {\r\n  return (\r\n    <div>\r\n      Filter Name: <input value={value} onChange={handler} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  addDetails,\r\n  newName,\r\n  newNumber,\r\n  handleAddName,\r\n  handleAddNumber,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addDetails}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleAddName} />\r\n        <br></br>\r\n        number: <input value={newNumber} onChange={handleAddNumber} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import axios from \"axios\";\r\n\r\nconst url = \"https://frozen-mountain-09673.herokuapp.com/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const req = axios.get(url);\r\n  return req.then((res) => res.data);\r\n};\r\n\r\nconst createData = (newData) => {\r\n  const req = axios.post(url, newData);\r\n  return req.then((res) => res.data);\r\n};\r\n\r\nconst deleteData = (id) => {\r\n  const req = axios.delete(`${url}/${id}`);\r\n  return req.then((res) => res.data);\r\n};\r\n\r\nconst updateData = (id, data) => {\r\n  const req = axios.put(`${url}/${id}`, data);\r\n  return req.then((res) => res.data);\r\n};\r\n\r\nconst dataService = { getAll, createData, deleteData, updateData };\r\n\r\nexport default dataService;\r\n","import React from \"react\";\r\nimport dataService from \"../services/dataService\";\r\n\r\nconst Person = ({ persons, setPersons, setMessage }) => {\r\n  const deleteHandler = (person) => {\r\n    const action = window.confirm(`Do you want to delete ${person.name}`);\r\n    const setArry = () => {\r\n      setPersons(persons.filter((name) => name !== person));\r\n    };\r\n    if (action) {\r\n      dataService\r\n        .deleteData(person.id)\r\n        .then(setArry())\r\n        .then(() => {\r\n          setMessage({\r\n            text: `${person.name} has been removed`,\r\n            type: \"success\",\r\n          });\r\n          setTimeout(() => {\r\n            setMessage(null);\r\n          }, 5000);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n          setMessage({\r\n            text: `${person.name} was already removed`,\r\n            type: \"error\",\r\n          });\r\n          setTimeout(() => {\r\n            setMessage(null);\r\n          }, 5000);\r\n        });\r\n    }\r\n  };\r\n\r\n  return persons.map((person, i) => (\r\n    <li key={i}>\r\n      Name: {person.name} - tel: {person.number} -{\" \"}\r\n      <button\r\n        onClick={() => {\r\n          deleteHandler(person);\r\n        }}\r\n      >\r\n        Delete\r\n      </button>\r\n    </li>\r\n  ));\r\n};\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div className={`notification ${message.type}`}>\r\n      <p>\r\n        <strong>{message.text}</strong>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Person from \"./components/Person\";\nimport Notification from \"./components/Notification\";\n\n//module for REST to data\nimport dataService from \"./services/dataService\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [filterPersons, setFilterPersons] = useState(persons);\n\n  const [message, setMessage] = useState(null);\n\n  //use effect to get data\n  const hook = () => {\n    console.log(\"effect hook\");\n    dataService.getAll().then((res) => {\n      console.log(\"promise done\");\n      setPersons(res);\n      //console.log(res);\n    });\n  };\n  useEffect(hook, []);\n\n  //Add Details\n  const addDetails = (e) => {\n    e.preventDefault();\n    const perArray = persons.map((e) => e.name);\n    const nameObj = {\n      name: newName,\n      number: newNumber,\n    };\n\n    if (perArray.includes(`${nameObj.name}`)) {\n      const id = persons\n        .filter((person) => person.name === newName)\n        .map((person) => person.id);\n      const res = window.confirm(\n        `${newName} is already added, update the number with a new one?`\n      );\n      if (res) {\n        dataService\n          .updateData(id, nameObj)\n          .then((res) => {\n            setPersons(\n              persons.map((person) => (person.id === res.id ? res : person))\n            );\n            setMessage({\n              text: `${res.name} number has been updated`,\n              type: \"success\",\n            });\n            setTimeout(() => {\n              setMessage(null);\n            }, 5000);\n          })\n          .catch((err) => {\n            setMessage({\n              text: `Information of ${nameObj.name} has already been removed from server ${err.message} `,\n              type: \"error\",\n            });\n            setTimeout(() => {\n              setMessage(null);\n            }, 5000);\n          });\n        setNewName(\"\");\n        setNumber(\"\");\n        return;\n      }\n    }\n\n    dataService\n      .createData(nameObj)\n      .then((returnData) => {\n        setPersons(persons.concat(returnData));\n        setMessage({\n          text: `Added ${returnData.name} to directory.`,\n          type: \"success\",\n        });\n        setTimeout(() => setMessage(null), 5000);\n      })\n      .catch((err) => {\n        setMessage({ text: err.message + \" \" + err.type, type: \"error\" });\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n        console.log(err.response);\n      });\n\n    setNewName(\"\");\n    setNumber(\"\");\n  };\n\n  const handleAddName = (e) => {\n    setNewName(e.target.value);\n  };\n  const handleAddNumber = (e) => {\n    setNumber(e.target.value);\n  };\n\n  //Filter names\n  const handleFilter = (e) => {\n    e.preventDefault();\n    setFilter(e.target.value);\n    //console.log(persons);\n    setFilterPersons(\n      persons.filter(\n        (p) => p.name.toLowerCase().indexOf(e.target.value.toLowerCase()) !== -1\n      )\n    );\n    //console.log(filterPersons);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter value={filter} handler={handleFilter} />\n      <h3>Add a new person and number:</h3>\n      <PersonForm\n        addDetails={addDetails}\n        newName={newName}\n        newNumber={newNumber}\n        handleAddName={handleAddName}\n        handleAddNumber={handleAddNumber}\n      />\n      <h2>Numbers</h2>\n      <ul>\n        {filter === \"\" ? (\n          <Person\n            persons={persons}\n            setPersons={setPersons}\n            setMessage={setMessage}\n          />\n        ) : (\n          <Person\n            persons={filterPersons}\n            setPersons={setPersons}\n            setMessage={setMessage}\n          />\n        )}\n      </ul>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App.js\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}