(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(15),a=n.n(c),o=n(3),r=n(1),u=n(0),s=function(e){var t=e.value,n=e.handler;return Object(u.jsxs)("div",{children:["Filter Name: ",Object(u.jsx)("input",{value:t,onChange:n})]})},i=function(e){var t=e.addDetails,n=e.newName,c=e.newNumber,a=e.handleAddName,o=e.handleAddNumber;return Object(u.jsxs)("form",{onSubmit:t,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:a}),Object(u.jsx)("br",{}),"number: ",Object(u.jsx)("input",{value:c,onChange:o})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=n(4),l=n.n(d),j="/api/persons",b={getAll:function(){return l.a.get(j).then((function(e){return e.data}))},createData:function(e){return l.a.post(j,e).then((function(e){return e.data}))},deleteData:function(e){return l.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},updateData:function(e,t){return l.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))}},f=function(e){var t=e.persons,n=e.setPersons,c=e.setMessage;return t.map((function(e,a){return Object(u.jsxs)("li",{children:["Name: ",e.name," - tel: ",e.number," -"," ",Object(u.jsx)("button",{onClick:function(){!function(e){window.confirm("Do you want to delete ".concat(e.name))&&b.deleteData(e.id).then(void n(t.filter((function(t){return t!==e})))).then((function(){c({text:"".concat(e.name," has been removed"),type:"success"}),setTimeout((function(){c(null)}),5e3)})).catch((function(t){console.log(t),c({text:"".concat(e.name," was already removed"),type:"error"}),setTimeout((function(){c(null)}),5e3)}))}(e)},children:"Delete"})]},a)}))},m=function(e){var t=e.message;return null===t?null:Object(u.jsx)("div",{className:"notification ".concat(t.type),children:Object(u.jsx)("p",{children:Object(u.jsx)("strong",{children:t.text})})})},h=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),d=Object(o.a)(a,2),l=d[0],j=d[1],h=Object(r.useState)(""),p=Object(o.a)(h,2),O=p[0],x=p[1],v=Object(r.useState)(""),g=Object(o.a)(v,2),w=g[0],y=g[1],D=Object(r.useState)(n),N=Object(o.a)(D,2),A=N[0],k=N[1],S=Object(r.useState)(null),C=Object(o.a)(S,2),T=C[0],P=C[1];Object(r.useEffect)((function(){console.log("effect hook"),b.getAll().then((function(e){console.log("promise done"),c(e)}))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(m,{message:T}),Object(u.jsx)(s,{value:w,handler:function(e){e.preventDefault(),y(e.target.value),k(n.filter((function(t){return-1!==t.name.toLowerCase().indexOf(e.target.value.toLowerCase())})))}}),Object(u.jsx)("h3",{children:"Add a new person and number:"}),Object(u.jsx)(i,{addDetails:function(e){e.preventDefault();var t=n.map((function(e){return e.name})),a={name:l,number:O};if(t.includes("".concat(a.name))){var o=n.filter((function(e){return e.name===l})).map((function(e){return e.id}));if(window.confirm("".concat(l," is already added, update the number with a new one?")))return b.updateData(o,a).then((function(e){c(n.map((function(t){return t.id===e.id?e:t}))),P({text:"".concat(e.name," number has been updated"),type:"success"}),setTimeout((function(){P(null)}),5e3)})).catch((function(e){P({text:"Information of ".concat(a.name," has already been removed from server ").concat(e.message," "),type:"error"}),setTimeout((function(){P(null)}),5e3)})),j(""),void x("")}b.createData(a).then((function(e){c(n.concat(e)),P({text:"Added ".concat(e.name," to directory."),type:"success"}),setTimeout((function(){return P(null)}),5e3)})).catch((function(e){P({text:e.message+" "+e.type,type:"error"}),setTimeout((function(){P(null)}),5e3),console.log(e.response)})),j(""),x("")},newName:l,newNumber:O,handleAddName:function(e){j(e.target.value)},handleAddNumber:function(e){x(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)("ul",{children:""===w?Object(u.jsx)(f,{persons:n,setPersons:c,setMessage:P}):Object(u.jsx)(f,{persons:A,setPersons:c,setMessage:P})})]})};n(40);a.a.render(Object(u.jsx)(h,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.8c706437.chunk.js.map